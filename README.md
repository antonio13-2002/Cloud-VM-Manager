Full-stack web application to manage a cloud service, focusing on the creation and the deletion of orders by customers.

## React Client Application Routes

- Route `/`: general layout of application. If user is not logged, renders Genericlayout. If user is logged, renders PublicLayout.
- Route `/login`: shows login and TOTP form for user authentication.
- Route `/orders`: renders component OrdersLayout to list all past orders for the authenticated user.
- Route `*`: NotFoundLayout, any layout that is different from the ones defined above.

## API Server

- GET `/api/specifications`
  - Returns specifications for the costs, and min/max amount of possible storage/instances purchasable
- GET `/api/resources`
  - Get total amount of already used resources 
- POST `/api/orders`
  - Takes in input the object {type_ram_id, storage_tb, transfer_gb}
  - Insert new order in the table 'orders'
  - Receive and sanitize any error generated by triggers in database 
- GET `/api/orders`
  - Read all the raws of table 'orders' with the corresponding userId 
- DELETE `/api/orders/:orderId`
  - Takes in input the orderId to be deleted
  - Removes the order from the table 'orders'
- POST `/api/sessions`
  - Performs user login
- POST `/api/login-totp`
  - Performs user login with TOTP (2FA)
- GET `/api/sessions/current`
 - Checks whether the user is logged or not
- DELETE `/api/sessions/current`
 - Logging out the current user

## Database Tables

- Table `users` - contains id email name hash salt secret
- Table `configuration` - contains id storage_price_per_tb transfer_limit_1 transfer_cost_1 transfer_limit_2 transfer_rate_base transfer_factor2 transfer_factor3 min_order_storage min_order_transfer max_total_storage max_active_instances
- Table `comput_class` - contains id ram_label ram_size m_fee min_stor_req
- Table `orders` - contains id user_id type_ram_id storage_tb transfer_gb total_m_cost

## Main React Components

- `TotpForm` (in `Auth.jsx`): form for TOTP user authentication
- `LoginForm` (in `Auth.jsx`): form for standard user authentication
- `CircularProgress` (in `CircularProgress.jsx`): circle that shows the total quantity of free RAM instances and storage amount
- `Dashboard` (in `Dashboard.jsx`): principal control panel for the user, to make a new order, go to the list of past orders and see the available resources
- `OrderForm` (in `Order.jsx`): form to make a new order. It makes the user specify the type of RAM instance and the quantity of storage and data transfer to rent. It also shows a guide for calculate the monthly price of the order.
- `OrderItem` (in `OrderList.jsx`): displays information of a single order, including the items rented and their quantities, including also the total and partial costs.


## Users Credentials (to make experiments)

- username: u1@p.it (Matteo), password: polito, secret: LXBSMDTMSP2I5XFXIYRGFVWSFI
- username: u2@p.it (Salvo), password: catania02, secret: None
- username: u3@p.it (Gianmarco), password: emily5, secret: LXBSMDTMSP2I5XFXIYRGFVWSFI
- username: u4@p.it (Antonio), password: bari02, secret: LXBSMDTMSP2I5XFXIYRGFVWSFI

## How to activate it:
To activate the React application:
```bash
cd client; npm run dev
```
To activate the backend server:
```bash
cd server; node index.js
```

